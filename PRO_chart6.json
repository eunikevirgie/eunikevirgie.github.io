{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Tourism Recovery Archetypes: Market Size vs. Performance",
    "subtitle": "Bubble size represents volatility (monthly standard deviation in recovery index). K-means clustering reveals three distinct recovery patterns."
  },
  "width": 600,
  "height": 400,
  "data": {
    "url": "https://raw.githubusercontent.com/eunikevirgie/eunikevirgie.github.io/refs/heads/main/Project_data_processed_figure5.csv"
  },
  "layer": [
    {
      "mark": "circle",
      "encoding": {
        "x": {
          "field": "market_share_2019",
          "type": "quantitative",
          "title": "Market Share in 2019 (%)",
          "scale": {"domain": [0, 50]}
        },
        "y": {
          "field": "current_recovery_index",
          "type": "quantitative",
          "title": "Recovery Index (% of 2019 levels)",
          "scale": {"domain": [0, 150]}
        },
        "size": {
          "field": "volatility",
          "type": "quantitative",
          "title": "Volatility (std dev)",
          "scale": {"range": [200, 2000]}
        },
        "color": {
          "field": "cluster_name",
          "type": "nominal",
          "title": "Recovery Archetype",
          "scale": {
            "domain": ["Slow Giant (China)", "High-Volume Laggards", "Diverse Performers"],
            "range": ["#E57373", "#FFB74D", "#81C784"]
          }
        },
        "tooltip": [
          {"field": "region", "type": "nominal", "title": "Region"},
          {"field": "cluster_name", "type": "nominal", "title": "Cluster"},
          {"field": "current_recovery_index", "type": "quantitative", "title": "Recovery Index", "format": ".1f"},
          {"field": "market_share_2019", "type": "quantitative", "title": "2019 Market Share (%)", "format": ".1f"},
          {"field": "volatility", "type": "quantitative", "title": "Volatility", "format": ".1f"}
        ]
      }
    },
    {
      "mark": {"type": "rule", "strokeDash": [5, 5], "color": "red", "opacity": 0.5},
      "encoding": {
        "y": {"datum": 100}
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "baseline": "middle",
        "dx": 5,
        "dy": -10,
        "fontSize": 11,
        "fontWeight": "bold"
      },
      "encoding": {
        "x": {"field": "market_share_2019", "type": "quantitative"},
        "y": {"field": "current_recovery_index", "type": "quantitative"},
        "text": {"field": "region", "type": "nominal"}
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "right",
        "baseline": "middle",
        "dx": -5,
        "fontSize": 10,
        "fontStyle": "italic",
        "color": "red"
      },
      "encoding": {
        "x": {"datum": 50},
        "y": {"datum": 103},
        "text": {"datum": "Pre-pandemic level"}
      }
    }
  ],
  "config": {
    "axis": {"gridOpacity": 0.3},
    "view": {"strokeWidth": 0}
  }
}
